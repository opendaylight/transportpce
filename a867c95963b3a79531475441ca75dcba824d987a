{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b8945dbb_97430d6b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6731
      },
      "writtenOn": "2022-12-11T15:22:26Z",
      "side": 1,
      "message": "Thanks a lot it LGTM but I did not manage to fully test it :(\n\nSadly the CI is KO and since lighty builds do not embed nbinotifications, it probably needs to be rebased on top of https://git.opendaylight.org/gerrit/c/transportpce/+/103655 before being tested",
      "revId": "a867c95963b3a79531475441ca75dcba824d987a",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8867612_f899ba47",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6731
      },
      "writtenOn": "2022-12-11T16:40:58Z",
      "side": 1,
      "message": "I got a couple of issues by running tests manually.\nI suspect these problems are older than this change.\n\npython3 transportpce_tests/with_docker/test02_nbinotifications.py\ninstalling NBI notification feature...\nstarting simulator xpdra in OpenROADM device version 2.2.1...\nSearching for pattern \u0027Netconf SSH endpoint started successfully at 0.0.0.0\u0027 in xpdra-221.log... Pattern found! simulator for xpdra started\nstarting simulator roadma in OpenROADM device version 2.2.1...\nSearching for pattern \u0027Netconf SSH endpoint started successfully at 0.0.0.0\u0027 in roadma-221.log... Pattern found! simulator for roadma started\nstarting simulator roadmc in OpenROADM device version 2.2.1...\nSearching for pattern \u0027Netconf SSH endpoint started successfully at 0.0.0.0\u0027 in roadmc-221.log... Pattern found! simulator for roadmc started\nstarting simulator xpdrc in OpenROADM device version 2.2.1...\nSearching for pattern \u0027Netconf SSH endpoint started successfully at 0.0.0.0\u0027 in xpdrc-221.log... Pattern found! simulator for xpdrc started\ntest_01_connect_xpdrA (__main__.TransportNbiNotificationstesting) ... execution of test_01_connect_xpdrA\nSearching for pattern \u0027Triggering notification stream NETCONF for node XPDR-A1\u0027 in karaf.log... Pattern found! Node XPDR-A1 correctly added to tpce topology... ok\ntest_02_connect_xpdrC (__main__.TransportNbiNotificationstesting) ... execution of test_02_connect_xpdrC\nSearching for pattern \u0027Triggering notification stream NETCONF for node XPDR-C1\u0027 in karaf.log... Pattern found! Node XPDR-C1 correctly added to tpce topology... ok\ntest_03_connect_rdmA (__main__.TransportNbiNotificationstesting) ... execution of test_03_connect_rdmA\nSearching for pattern \u0027Triggering notification stream NETCONF for node ROADM-A1\u0027 in karaf.log... Pattern found! Node ROADM-A1 correctly added to tpce topology... ok\ntest_04_connect_rdmC (__main__.TransportNbiNotificationstesting) ... execution of test_04_connect_rdmC\nSearching for pattern \u0027Triggering notification stream NETCONF for node ROADM-C1\u0027 in karaf.log... Pattern found! Node ROADM-C1 correctly added to tpce topology... ok\ntest_05_connect_xprdA_N1_to_roadmA_PP1 (__main__.TransportNbiNotificationstesting) ... execution of test_05_connect_xprdA_N1_to_roadmA_PP1\nok\ntest_06_connect_roadmA_PP1_to_xpdrA_N1 (__main__.TransportNbiNotificationstesting) ... execution of test_06_connect_roadmA_PP1_to_xpdrA_N1\nok\ntest_07_connect_xprdC_N1_to_roadmC_PP1 (__main__.TransportNbiNotificationstesting) ... execution of test_07_connect_xprdC_N1_to_roadmC_PP1\nok\ntest_08_connect_roadmC_PP1_to_xpdrC_N1 (__main__.TransportNbiNotificationstesting) ... execution of test_08_connect_roadmC_PP1_to_xpdrC_N1\nok\ntest_09_get_notifications_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_09_get_notifications_service1\nok\ntest_10_create_eth_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_10_create_eth_service1\nok\ntest_11_get_notifications_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_11_get_notifications_service1\nok\ntest_12_add_omsAttributes_ROADMA_ROADMC (__main__.TransportNbiNotificationstesting) ... execution of test_12_add_omsAttributes_ROADMA_ROADMC\nok\ntest_13_add_omsAttributes_ROADMC_ROADMA (__main__.TransportNbiNotificationstesting) ... execution of test_13_add_omsAttributes_ROADMC_ROADMA\nok\ntest_14_create_eth_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_14_create_eth_service1\nok\ntest_15_get_eth_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_15_get_eth_service1\nFAIL\ntest_16_get_notifications_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_16_get_notifications_service1\nFAIL\ntest_17_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_17_get_notifications_alarm_service1\nFAIL\ntest_18_change_status_port_roadma_srg (__main__.TransportNbiNotificationstesting) ... execution of test_18_change_status_port_roadma_srg\nok\ntest_19_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_19_get_notifications_alarm_service1\nFAIL\ntest_20_restore_status_port_roadma_srg (__main__.TransportNbiNotificationstesting) ... execution of test_20_restore_status_port_roadma_srg\nok\ntest_21_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_21_get_notifications_alarm_service1\nFAIL\ntest_22_delete_eth_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_22_delete_eth_service1\nok\ntest_23_get_notifications_service1 (__main__.TransportNbiNotificationstesting) ... execution of test_23_get_notifications_service1\nFAIL\ntest_24_disconnect_XPDRA (__main__.TransportNbiNotificationstesting) ... execution of test_24_disconnect_XPDRA\nSearching for pattern \u0027onDeviceDisConnected:\\ XPDR\\-A1\u0027 in karaf.log... Pattern found! Node XPDR-A1 correctly deleted from tpce topology... ok\ntest_25_disconnect_XPDRC (__main__.TransportNbiNotificationstesting) ... execution of test_25_disconnect_XPDRC\nSearching for pattern \u0027onDeviceDisConnected:\\ XPDR\\-C1\u0027 in karaf.log... Pattern found! Node XPDR-C1 correctly deleted from tpce topology... ok\ntest_26_disconnect_ROADMA (__main__.TransportNbiNotificationstesting) ... execution of test_26_disconnect_ROADMA\nSearching for pattern \u0027onDeviceDisConnected:\\ ROADM\\-A1\u0027 in karaf.log... Pattern found! Node ROADM-A1 correctly deleted from tpce topology... ok\ntest_27_disconnect_ROADMC (__main__.TransportNbiNotificationstesting) ... execution of test_27_disconnect_ROADMC\nSearching for pattern \u0027onDeviceDisConnected:\\ ROADM\\-C1\u0027 in karaf.log... Pattern found! Node ROADM-C1 correctly deleted from tpce topology... ok\nall processes killed\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_15_get_eth_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 241, in test_15_get_eth_service1\n    self.assertEqual(response[\u0027services\u0027][0][\u0027administrative-state\u0027], \u0027inService\u0027)\nAssertionError: \u0027outOfService\u0027 !\u003d \u0027inService\u0027\n- outOfService\n+ inService\n\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_16_get_notifications_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 252, in test_16_get_notifications_service1\n    self.assertEqual(response[\u0027output\u0027][\u0027notifications-process-service\u0027][-1][\u0027message\u0027], \u0027Service implemented !\u0027)\nAssertionError: \u0027ServiceCreate request failed ...\u0027 !\u003d \u0027Service implemented !\u0027\n- ServiceCreate request failed ...\n+ Service implemented !\n\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_17_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 257, in test_17_get_notifications_alarm_service1\n    self.assertEqual(response[\u0027status_code\u0027], requests.codes.ok)\nAssertionError: 204 !\u003d 200\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_19_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 283, in test_19_get_notifications_alarm_service1\n    self.assertEqual(response[\u0027status_code\u0027], requests.codes.ok)\nAssertionError: 204 !\u003d 200\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_21_get_notifications_alarm_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 307, in test_21_get_notifications_alarm_service1\n    self.test_17_get_notifications_alarm_service1()\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 257, in test_17_get_notifications_alarm_service1\n    self.assertEqual(response[\u0027status_code\u0027], requests.codes.ok)\nAssertionError: 204 !\u003d 200\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: test_23_get_notifications_service1 (__main__.TransportNbiNotificationstesting)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/guillaume/git_ws/transportpce/tests/transportpce_tests/with_docker/test02_nbinotifications.py\", line 324, in test_23_get_notifications_service1\n    self.assertEqual(response[\u0027output\u0027][\u0027notifications-process-service\u0027][-1][\u0027message\u0027], \u0027Service deleted !\u0027)\nAssertionError: \u0027ServiceCreate request failed ...\u0027 !\u003d \u0027Service deleted !\u0027\n- ServiceCreate request failed ...\n+ Service deleted !\n\n\n----------------------------------------------------------------------\nRan 27 tests in 146.746s\n\nFAILED (failures\u003d6)",
      "parentUuid": "b8945dbb_97430d6b",
      "revId": "a867c95963b3a79531475441ca75dcba824d987a",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b5165a8_41da4e85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 7446
      },
      "writtenOn": "2022-12-12T12:30:00Z",
      "side": 1,
      "message": "I retested it locally on my side, and it works fine.",
      "parentUuid": "e8867612_f899ba47",
      "revId": "a867c95963b3a79531475441ca75dcba824d987a",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e439d3b_8136d530",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6731
      },
      "writtenOn": "2022-12-12T13:30:03Z",
      "side": 1,
      "message": "Fair enough.\n\nIt may be due to my local settings.",
      "parentUuid": "3b5165a8_41da4e85",
      "revId": "a867c95963b3a79531475441ca75dcba824d987a",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    }
  ]
}