{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ca6d2ccd_35f562a2",
        "filename": "tapi/src/main/java/org/opendaylight/transportpce/tapi/connectivity/ConnectivityUtils.java",
        "patchSetId": 28
      },
      "lineNbr": 719,
      "author": {
        "id": 9231
      },
      "writtenOn": "2025-10-29T11:56:22Z",
      "side": 1,
      "message": "The functional test `test_23_get_tapi_node_details_at_DSR_Service_creation` fails (test02_full_topology.py).\n\nUpon further inspection, it is probably due to this method (`isType(...)`) never finding the OpenroadmTpType for an xponder client (e.g. \"XPDR1-CLIENT1\").\n\nThe unit test I wrote is missing one scenario: where pathdescription contains a tp such as `TerminationPoint{tpId\u003dXPDR1-CLIENT1, tpNodeId\u003dSPDR-SA1-XPDR1}` Adding the scenario reveals `idCollection.xpdrClientTplist()` is empty, when it should contain :\n\n    List.of(\n        \"SPDR-SA1-XPDR1+XPDR1-CLIENT1\",\n        \"SPDR-SC1-XPDR1+XPDR1-CLIENT1\"\n    )\n    \nThe question is how to proceed, since the openroadm-topology doesn\u0027t contain the xponder client information. I believe the otn topology do. Maybe I could read that instead? The other option would be to use portmapping.",
      "revId": "a538c5ece333741697fddca74a851620ed3724ff",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83eba9bf_889f772b",
        "filename": "tapi/src/main/java/org/opendaylight/transportpce/tapi/connectivity/ConnectivityUtils.java",
        "patchSetId": 28
      },
      "lineNbr": 719,
      "author": {
        "id": 9231
      },
      "writtenOn": "2025-10-29T12:53:55Z",
      "side": 1,
      "message": "Another option is to assume it\u0027s a client if it\u0027s not a network. Something like:\n\n```\ncase XPONDER -\u003e {\n    if (isType(networkNode, tpID, Set.of(OpenroadmTpType.XPONDERNETWORK))) {\n        idCollection.addXpdrNetworkTp(\n                String.join(\"+\", tp.getTpNodeId(), tpID));\n    } else {\n        idCollection.addXpdrClientTp(\n                String.join(\"+\", tp.getTpNodeId(), tpID));\n    }\n    idCollection.addXpdrNode(tp.getTpNodeId());\n}\n```\n\nMaybe that is the best compromise?",
      "parentUuid": "ca6d2ccd_35f562a2",
      "revId": "a538c5ece333741697fddca74a851620ed3724ff",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d25948e4_5b47d486",
        "filename": "tapi/src/main/java/org/opendaylight/transportpce/tapi/connectivity/ConnectivityUtils.java",
        "patchSetId": 28
      },
      "lineNbr": 719,
      "author": {
        "id": 9231
      },
      "writtenOn": "2025-10-29T14:37:49Z",
      "side": 1,
      "message": "For now, I opted to go with assuming it\u0027s a client if it\u0027s not a network. Row 674 in this change:\n\n```\ncase XPONDER -\u003e {\n    if (isType(networkNode, tpID, Set.of(OpenroadmTpType.XPONDERNETWORK))) {\n        idCollection.addXpdrNetworkTp(\n                String.join(\"+\", tp.getTpNodeId(), tpID));\n    } else {\n        idCollection.addXpdrClientTp(\n                String.join(\"+\", tp.getTpNodeId(), tpID));\n    }\n    idCollection.addXpdrNode(tp.getTpNodeId());\n}\n```",
      "parentUuid": "83eba9bf_889f772b",
      "revId": "a538c5ece333741697fddca74a851620ed3724ff",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81"
    }
  ]
}